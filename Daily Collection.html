<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <title>Daily/Monthly Saving Form</title>
  <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
  <style>
    :root {
      --maroon: #800000;
      --light-maroon: #a05252;
    }

    body {
      font-family: 'Segoe UI', sans-serif;
      background: white;
      margin: 0;
      padding: 30px;
      color: var(--maroon);
    }

    .form-container {
      background: white;
      max-width: 900px;
      margin: auto;
      padding: 30px;
      border-radius: 12px;
      border: 2px solid var(--maroon);
      box-shadow: 0 0 15px rgba(0,0,0,0.1);
      position: relative;
    }

    h1 {
      text-align: center;
      background: var(--maroon);
      color: white;
      padding: 10px;
      border-radius: 8px;
      margin-bottom: 5px;
    }

    .reg-no {
      text-align: center;
      font-weight: bold;
      margin-bottom: 20px;
    }

    .alert {
      background: #fff0f0;
      border: 2px solid var(--maroon);
      color: var(--maroon);
      font-weight: bold;
      padding: 10px;
      text-align: center;
      margin-bottom: 20px;
      border-radius: 6px;
    }

    .form-row {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 15px;
    }

    .form-group {
      flex: 1;
      min-width: 250px;
      display: flex;
      flex-direction: column;
    }

    label {
      font-weight: bold;
      margin-bottom: 5px;
    }

    input, select {
      padding: 10px;
      font-size: 16px;
      border: 1px solid var(--maroon);
      border-radius: 6px;
      background-color: white;
      color: var(--maroon);
    }

    input:focus, select:focus {
      outline: none;
      box-shadow: 0 0 5px var(--light-maroon);
    }

    .final-warning {
      background: #fff0f0;
      color: var(--maroon);
      font-weight: bold;
      padding: 10px;
      text-align: center;
      border: 1px dashed var(--maroon);
      border-radius: 6px;
      margin-top: 20px;
    }

    .print-note {
      font-weight: bold;
      color: var(--maroon);
      border-top: 1px solid var(--maroon);
      margin-top: 30px;
      padding-top: 10px;
      font-size: 15px;
    }

    #qrcode {
      display: none;
    }

    @media print {
      .print-button, .submit-button, #successMsg {
        display: none;
      }

      body {
        background: white;
      }

      .form-container {
        box-shadow: none;
      }

      #qrcode {
        display: block;
        position: absolute;
        bottom: 30px;
        right: 30px;
      }
    }

    /* Security Screen */
    #security-screen {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }

    .security-box {
      border: 2px solid var(--maroon);
      padding: 30px;
      border-radius: 10px;
      text-align: center;
      max-width: 350px;
    }

    .security-box input {
      padding: 10px;
      font-size: 16px;
      text-align: center;
      border: 1px solid var(--maroon);
      border-radius: 6px;
      width: 100%;
    }

    .security-box button {
      background: var(--maroon);
      color: white;
      padding: 10px 20px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 15px;
      font-size: 16px;
      font-weight: bold;
    }

    .security-box h2 {
      color: var(--maroon);
    }

  </style>
</head>
<body>

  <!-- Security Screen -->
  <div id="security-screen">
    <div class="security-box">
      <h2>üîí Enter Security Code</h2>
      <input type="password" id="securityInput" placeholder="Security Code">
      <br>
      <button onclick="checkCode()">‚úÖ Submit</button>
      <p id="errorMsg" style="color:red;font-weight:bold;margin-top:10px;display:none;">‚ùå Wrong Code</p>
    </div>
  </div>

  <!-- Form Section -->
  <div class="form-container" id="printArea" style="display:none;">
    <h1>Shree Radha Credit Co-operative Society</h1>
    <div class="reg-no">‡§™‡§Ç‡§ú‡•Ä‡§ï‡§∞‡§£ ‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ: DSH/COOP/2024/12345</div>

    <div class="alert">
      ‚ùó ‡§Ø‡§¶‡§ø Daily/Montly Saving ‡§ï‡§æ ‡§°‡•á‡§ü‡§æ ‡§ó‡§≤‡§§ ‡§≠‡§∞‡§æ ‡§ó‡§Ø‡§æ, ‡§§‡•ã ‡§∏‡§Ç‡§¨‡§Ç‡§ß‡§ø‡§§ ‡§ï‡§∞‡•ç‡§Æ‡§ö‡§æ‡§∞‡•Ä ‡§™‡§∞ ‚Çπ5000 ‡§ï‡§æ ‡§ú‡•Å‡§∞‡•ç‡§Æ‡§æ‡§®‡§æ ‡§≤‡§ó‡§æ‡§Ø‡§æ ‡§ú‡§æ‡§è‡§ó‡§æ‡•§<br>
      ‡§ï‡•É‡§™‡§Ø‡§æ ‡§°‡•á‡§ü‡§æ ‡§∏‡§æ‡§µ‡§ß‡§æ‡§®‡•Ä‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§≠‡§∞‡•á‡§Ç ‡§î‡§∞ ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§ø‡§§ ‡§ï‡§∞‡•á‡§Ç‡•§
    </div>

    <form id="savingForm">

      <!-- Row 1 -->
      <div class="form-row">
        <div class="form-group">
          <label>Member Name:</label>
          <input type="text" name="memberName" required>
        </div>
        <div class="form-group">
          <label>Account Number:</label>
          <input type="text" name="accountNumber" required>
        </div>
        <div class="form-group">
          <label>Mobile Number:</label>
          <input type="text" name="mobileNumber" pattern="[0-9]{10}" required>
        </div>
      </div>

      <!-- Row 2 -->
      <div class="form-row">
        <div class="form-group">
          <label>Aadhaar Number:</label>
          <input type="text" name="aadhaarNumber" placeholder="XXXX XXXX XXXX" required>
        </div>
        <div class="form-group">
          <label>Saving Type:</label>
          <select name="savingType" required>
            <option value="">Select</option>
            <option value="Daily">Daily</option>
            <option value="Monthly">Monthly</option>
          </select>
        </div>
      </div>

      <!-- Row 3 -->
      <div class="form-row">
        <div class="form-group">
          <label>Deposit Amount (‚Çπ):</label>
          <input type="number" name="amount" required>
        </div>
        <div class="form-group">
          <label>Collector Name:</label>
          <input type="text" name="collectorName" required>
        </div>
      </div>

      <!-- Operator -->
      <div class="form-row">
        <div class="form-group">
          <label>System Operator Name:</label>
          <input type="text" name="operatorName" required>
        </div>
        <div class="form-group">
          <label>Operator ID:</label>
          <input type="text" name="operatorId" required>
        </div>
      </div>

      <div class="final-warning">
        ‚õî ‡§ï‡•É‡§™‡§Ø‡§æ ‡§è‡§ï ‡§¨‡§æ‡§∞ ‡§™‡•Å‡§®‡§É ‡§ú‡§æ‡§Å‡§ö ‡§ï‡§∞‡•á‡§Ç:<br>
        ‡§°‡•á‡§ü‡§æ ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§∞‡§®‡•á ‡§∏‡•á ‡§™‡§π‡§≤‡•á ‡§∏‡§≠‡•Ä ‡§ú‡§æ‡§®‡§ï‡§æ‡§∞‡•Ä ‡§∏‡§æ‡§µ‡§ß‡§æ‡§®‡•Ä‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§ú‡§æ‡§Å‡§ö ‡§≤‡•á‡§Ç‡•§
      </div>

      <div class="form-row" style="margin-top: 30px; gap: 10px;">
        <button type="submit" class="submit-button" style="
          background-color: var(--maroon);
          color: white;
          padding: 12px;
          font-size: 16px;
          font-weight: bold;
          border: none;
          border-radius: 6px;
          cursor: pointer;
          flex: 1;
        ">üî¥ Submit</button>

        <button type="button" onclick="window.print()" class="print-button" style="
          background-color: green;
          color: white;
          padding: 12px;
          font-size: 16px;
          font-weight: bold;
          border: none;
          border-radius: 6px;
          cursor: pointer;
          flex: 1;
        ">üñ®Ô∏è Print</button>
      </div>

      <div id="successMsg" style="
        display: none;
        margin-top: 20px;
        color: green;
        font-weight: bold;
        text-align: center;
        font-size: 18px;
      ">‚úÖ ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ!</div>

      <div class="print-note">
        üìù ‡§™‡•ç‡§∞‡§ø‡§Ç‡§ü ‡§®‡§ø‡§ï‡§æ‡§≤‡§®‡§æ ‡§Ö‡§®‡§ø‡§µ‡§æ‡§∞‡•ç‡§Ø ‡§π‡•à‡•§ ‡§Ø‡§π ‡§´‡•â‡§∞‡•ç‡§Æ ‡§∏‡§§‡•ç‡§Ø‡§æ‡§™‡§® ‡§π‡•á‡§§‡•Å ‡§Æ‡•á‡§®‡•á‡§ú‡§∞ ‡§∏‡•á ‡§π‡§∏‡•ç‡§§‡§æ‡§ï‡•ç‡§∑‡§∞‡§ø‡§§ ‡§ï‡§∞‡§æ‡§®‡§æ ‡§Ü‡§µ‡§∂‡•ç‡§Ø‡§ï ‡§π‡•à‡•§
      </div>

      <div id="qrcode"></div>
    </form>
  </div>

  <script>
    const correctCode = "R@dha9754";

    function checkCode(){
      let entered = document.getElementById("securityInput").value;
      if(entered === correctCode){
        document.getElementById("security-screen").style.display = "none";
        document.getElementById("printArea").style.display = "block";
      } else {
        document.getElementById("errorMsg").style.display = "block";
      }
    }

    // ‚úÖ Enter key bhi kaam kare
    document.getElementById("securityInput").addEventListener("keydown", function(event){
      if(event.key === "Enter"){
        event.preventDefault(); // page reload na ho
        checkCode();
      }
    });

    const form = document.getElementById("savingForm");
    const successMsg = document.getElementById("successMsg");

    form.addEventListener("submit", function (e) {
      e.preventDefault();

      const formData = {
        "Member Name": form.memberName.value,
        "Account Number": form.accountNumber.value,
        "Mobile Number": form.mobileNumber.value,
        "Aadhaar Number": form.aadhaarNumber.value,
        "Saving Type": form.savingType.value,
        "Amount": form.amount.value,
        "Collector Name": form.collectorName.value,
        "System Operator": form.operatorName.value,
        "Operator ID": form.operatorId.value,
        "Date & Time": new Date().toLocaleString('en-IN', { timeZone: 'Asia/Kolkata' })
      };

      fetch("https://script.google.com/macros/s/AKfycbwJXk2GnOZJjgwRRLkrd9_vJWAHrFxeFsHLH_Abd8wshSpWNtNRzH7fR1OaKw-o0X8l/exec", {
        method: "POST",
        mode: "no-cors",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify(formData)
      });

      successMsg.style.display = "block";
      alert("‚úÖ OK: ‡§∏‡§´‡§≤‡§§‡§æ‡§™‡•Ç‡§∞‡•ç‡§µ‡§ï ‡§∏‡§¨‡§Æ‡§ø‡§ü ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ!");
      form.reset();

      const qrData = Object.entries(formData).map(([key, val]) => `${key}: ${val}`).join('\n');
      const qrContainer = document.getElementById("qrcode");
      qrContainer.innerHTML = "";

      QRCode.toCanvas(qrData, { width: 140 }, function (err, canvas) {
        if (!err) {
          qrContainer.appendChild(canvas);
        }
      });
    });
  </script>

</body>
</html>
